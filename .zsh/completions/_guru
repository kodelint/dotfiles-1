#compdef oracle

_oracle() {
__go_packages() {
  local gopaths
  declare -a gopaths
  gopaths=("${(s/:/)$(go env GOPATH)}")
  gopaths+=("$(go env GOROOT)")
  for p in $gopaths; do
    _path_files -W "$p/src" -/
  done
}

case ${words[1]} in
  oracle)
    _arguments \
      '-cpuprofile:write cpu profile to file:_file' \
      '-format:Output format:(plain json xml)' \
      '-pos=:Filename and byte offset or extent of a syntax element about which to query:__go_packages\:\#' \
      '-ptalog:Location of the points-to analysis log file, or empty to disable logging:_file' \
      '-reflect[Analyze reflection soundly (slow)]' \
      '-tags[list of build tags to consider satisfied]:tags'
      ;;

  *)
      # use files by default
      _files
      ;;
  esac
  ;;
esac
}


compdef _oracle() oracle
